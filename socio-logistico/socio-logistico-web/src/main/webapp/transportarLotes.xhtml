<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<body>
	<div id= "res" class="card">


			<p:dataTable id= "lotes" var="lote" value="#{ListarBean.list}" paginator="true"
				rows="10"
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
				
				<p:column headerText="Numero Lote">
				
					<h:outputText value="#{lote.numeroLote}" />
				</p:column>
				<p:column headerText="Vacuna">
					<h:outputText value="#{lote.vacuna}" />
				</p:column>
				<p:column headerText="Dosis Disponibles">
					<h:outputText value="#{lote.dosisDisponibles}" />
				</p:column>
				<p:column headerText="Vacunatorio">
					<h:outputText value="#{lote.nombreVacunatorio}" />
				</p:column>
				<p:column headerText="Fecha Vencimiento">
					<h:outputText value="#{lote.fechaVencimiento}" />
				</p:column>
				<p:column headerText="Fecha Entrega">
					<h:outputText value="#{lote.fechaEntrega}" />
				</p:column>
				<p:column headerText="Fecha Despacho">
					<h:outputText value="#{lote.fechaDespacho}" />
				</p:column>
				 <p:column id= "columna" headerText="Estado">
				
					<h:form id="form" rendered="#{empty lote.fechaDespacho}">
						<h:commandButton value="Despachar" type="submit" class="btn btn-danger" style="padding: 2px 6px" action="#{ListarBean.despachar(lote.numeroLote)}" />
					</h:form>
					
					<h:outputText rendered="#{not empty lote.fechaDespacho and empty lote.fechaEntrega}" value="Entregando" />
					<h:outputText rendered="#{not empty lote.fechaEntrega}" value="Entregado" />
					
					
				</p:column>
				

			</p:dataTable> 			
			<p:poll interval="5" update="lotes" autoStart="true" />			
 			
	</div>
	
    

</body>
</html>
